<!DOCTYPE html>
<html lang="el">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Î Î¿ÏÏ„Î¿Ï†ÏŒÎ»Î¹Î± ÎœÎµÏ„Î¿Ï‡ÏÎ½</title>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <style>
    body {
      font-family: Arial, sans-serif;
      background: #f4f6f8;
      margin: 0;
      padding: 20px;
      color: #333;
    }
    h1 { 
      text-align: center; 
      color: #2c3e50;
      margin-bottom: 30px;
      text-shadow: 1px 1px 2px rgba(0,0,0,0.1);
    }
    .portfolio-selector {
      text-align: center;
      margin-bottom: 30px;
      padding: 15px;
      background: white;
      border-radius: 10px;
      box-shadow: 0 4px 12px rgba(0,0,0,0.1);
    }
    .portfolio-selector button {
      background-color: #7f8c8d;
      color: black;
      border: none;
      padding: 14px 28px;
      border-radius: 8px;
      cursor: pointer;
      font-size: 16px;
      margin: 0 8px;
      transition: all 0.3s ease;
      font-weight: bold;
    }
    .portfolio-selector button:hover {
      transform: translateY(-3px);
      box-shadow: 0 6px 12px rgba(0,0,0,0.15);
      color: black;
    }
    .portfolio-selector button.active {
      transform: translateY(-3px);
      box-shadow: 0 6px 12px rgba(0,0,0,0.2);
      color: black;
    }
    .portfolio-selector button:nth-child(1).active { 
      background: linear-gradient(135deg, #FFD700, #FFC107);
      color: black;
    }
    .portfolio-selector button:nth-child(2).active { 
      background: linear-gradient(135deg, #2196F3, #1976D2);
      color: black;
    }
    .portfolio-selector button:nth-child(3).active { 
      background: linear-gradient(135deg, #424242, #212121);
      color: white;
    }
    .portfolio-selector button:nth-child(4).active { 
      background: linear-gradient(135deg, #f39c12, #e67e22);
      color: black;
    }
    .controls {
      text-align: center;
      margin: 25px 0;
      padding: 15px;
      background: white;
      border-radius: 10px;
      box-shadow: 0 4px 12px rgba(0,0,0,0.1);
    }
    .controls button {
      color: white;
      border: none;
      padding: 12px 24px;
      border-radius: 6px;
      cursor: pointer;
      font-size: 15px;
      margin: 5px 8px;
      transition: all 0.3s ease;
      font-weight: bold;
    }
    .controls button.add-purchase {
      background: linear-gradient(135deg, #2ecc71, #27ae60);
    }
    .controls button.add-purchase:hover {
      background: linear-gradient(135deg, #27ae60, #219653);
      transform: translateY(-2px);
      box-shadow: 0 4px 8px rgba(39, 174, 96, 0.3);
    }
    .controls button.add-sale {
      background: linear-gradient(135deg, #e74c3c, #c0392b);
    }
    .controls button.add-sale:hover {
      background: linear-gradient(135deg, #c0392b, #a93226);
      transform: translateY(-2px);
      box-shadow: 0 4px 8px rgba(231, 76, 60, 0.3);
    }
    .controls button.save {
      background: linear-gradient(135deg, #3498db, #2980b9);
    }
    .controls button.save:hover {
      background: linear-gradient(135deg, #2980b9, #1c6ea4);
      transform: translateY(-2px);
      box-shadow: 0 4px 8px rgba(52, 152, 219, 0.3);
    }
    .controls button.save-all {
      background: linear-gradient(135deg, #9b59b6, #8e44ad);
    }
    .controls button.save-all:hover {
      background: linear-gradient(135deg, #8e44ad, #7d3c98);
      transform: translateY(-2px);
      box-shadow: 0 4px 8px rgba(155, 89, 182, 0.3);
    }
    .controls button.delete {
      background: linear-gradient(135deg, #e74c3c, #c0392b);
    }
    .controls button.delete:hover {
      background: linear-gradient(135deg, #c0392b, #a93226);
      transform: translateY(-2px);
      box-shadow: 0 4px 8px rgba(231, 76, 60, 0.3);
    }
    .section-title {
      font-size: 24px;
      font-weight: bold;
      color: #2c3e50;
      margin: 30px 0 20px 0;
      padding: 15px;
      border-radius: 8px;
      background: linear-gradient(135deg, #ecf0f1, #dfe6e9);
      text-align: center;
      box-shadow: 0 2px 8px rgba(0,0,0,0.1);
    }
    .owner-name {
      color: black;
      font-weight: bold;
      text-shadow: 1px 1px 2px rgba(0,0,0,0.1);
    }
    .sub-section-title {
      font-size: 22px;
      color: white;
      margin: 25px 0 15px 0;
      padding: 15px 20px;
      background: linear-gradient(135deg, #000000, #333333);
      color: white;
      border-radius: 8px;
      font-weight: bold;
      text-transform: uppercase;
      letter-spacing: 2px;
      box-shadow: 0 4px 12px rgba(0,0,0,0.2);
      text-align: center;
    }
    table {
      width: 100%;
      border-collapse: collapse;
      margin-top: 15px;
      background: #fff;
      box-shadow: 0 4px 12px rgba(0,0,0,0.1);
      border-radius: 8px;
      overflow: hidden;
    }
    th, td {
      padding: 12px 10px;
      border: 1px solid #e0e0e0;
      text-align: center;
      font-size: 14px;
    }
    th { 
      background: linear-gradient(135deg, #2c3e50, #34495e); 
      color: #fff; 
      font-weight: bold;
      position: sticky;
      top: 0;
      text-transform: uppercase;
      letter-spacing: 0.5px;
    }
    tr:nth-child(even) {
      background-color: #f8f9fa;
    }
    tr:hover {
      background-color: #f0f7ff;
      transition: background-color 0.2s ease;
    }
    input {
      width: 95%;
      padding: 8px 6px;
      border: 1px solid #ddd;
      border-radius: 4px;
      font-size: 14px;
      transition: all 0.3s ease;
    }
    input:focus {
      outline: none;
      border-color: #3498db;
      box-shadow: 0 0 0 3px rgba(52,152,219,0.2);
      transform: scale(1.02);
    }
    input[type="number"] {
      text-align: right;
    }
    input[type="date"] {
      text-align: center;
    }
    .summary {
      margin-top: 30px;
      background: linear-gradient(135deg, #fff, #f8f9fa);
      padding: 25px;
      font-size: 16px;
      box-shadow: 0 4px 12px rgba(0,0,0,0.1);
      border-radius: 10px;
    }
    .summary strong {
      color: #2c3e50;
      font-weight: bold;
    }
    .summary div {
      margin: 10px 0;
      padding: 8px;
      background: #f8f9fa;
      border-radius: 5px;
    }
    .calculations-row {
      background: linear-gradient(135deg, #2c3e50, #34495e);
      color: white;
      font-weight: bold;
    }
    .calculations-row td {
      font-size: 16px;
      font-weight: bold;
    }
    .totals-row {
      background: linear-gradient(135deg, #27ae60, #219653);
      color: white;
      font-weight: bold;
      border-top: 3px solid #2c3e50;
    }
    .totals-row td {
      font-size: 15px;
      font-weight: bold;
    }
    #chart-container {
      margin-top: 40px;
      background: white;
      padding: 25px;
      border-radius: 10px;
      box-shadow: 0 4px 12px rgba(0,0,0,0.1);
    }
    .profit { 
      color: #27ae60; 
      font-weight: bold;
      text-shadow: 0 1px 2px rgba(0,0,0,0.1);
    }
    .loss { 
      color: #e74c3c; 
      font-weight: bold;
      text-shadow: 0 1px 2px rgba(0,0,0,0.1);
    }
    .commission-inputs {
      display: flex;
      flex-direction: column;
      gap: 5px;
    }
    .commission-inputs input {
      width: 100%;
    }
    .hidden {
      display: none;
    }
    .message {
      position: fixed;
      top: 20px;
      right: 20px;
      padding: 15px 25px;
      background: linear-gradient(135deg, #27ae60, #219653);
      color: white;
      border-radius: 8px;
      box-shadow: 0 4px 12px rgba(0,0,0,0.2);
      font-weight: bold;
      z-index: 1000;
      animation: slideIn 0.3s ease, fadeOut 0.3s ease 2.7s;
      opacity: 0;
    }
    @keyframes slideIn {
      from {
        transform: translateX(100%);
        opacity: 0;
      }
      to {
        transform: translateX(0);
        opacity: 1;
      }
    }
    @keyframes fadeOut {
      from {
        opacity: 1;
      }
      to {
        opacity: 0;
      }
    }
    .current-price-input {
      background-color: #fff8e1;
      border-color: #ffd54f;
    }
    .current-price-input:focus {
      border-color: #ffb300;
      box-shadow: 0 0 0 3px rgba(255, 183, 0, 0.2);
    }
    .dividend-input {
      background-color: #e8f5e9;
      border-color: #81c784;
    }
    .dividend-input:focus {
      border-color: #4caf50;
      box-shadow: 0 0 0 3px rgba(76, 175, 80, 0.2);
    }
    .history-table {
      margin-top: 20px;
    }
    .history-table th {
      background: linear-gradient(135deg, #424242, #212121);
    }
    .sold-stock {
      background-color: #f8f9fa;
      opacity: 0.9;
    }
    .stock-status {
      font-size: 11px;
      padding: 2px 6px;
      border-radius: 3px;
      font-weight: bold;
      margin-left: 5px;
    }
    .status-active {
      background-color: #27ae60;
      color: white;
    }
    .status-sold {
      background-color: #e74c3c;
      color: white;
    }
    .status-partial {
      background-color: #f39c12;
      color: white;
    }
  </style>
</head>
<body>

<h1>ğŸ“ˆ Î ÎŸÎ¡Î¤ÎŸÎ¦ÎŸÎ›Î™Î‘ ÎœÎ•Î¤ÎŸÎ§Î©Î</h1>

<div class="portfolio-selector">
  <button onclick="switchPortfolio('mitsos')" id="btn-mitsos" class="active">ğŸ‘¤ ÎšÎ¬Ï„Î¿Ï‡Î¿Ï‚: ÎœÎ—Î¤Î£ÎŸÎ£</button>
  <button onclick="switchPortfolio('aderfoula')" id="btn-aderfoula">ğŸ‘¤ ÎšÎ¬Ï„Î¿Ï‡Î¿Ï‚: Î‘Î”Î•Î¡Î¦ÎŸÎ¥Î›Î‘</button>
  <button onclick="switchPortfolio('father')" id="btn-father">ğŸ‘¤ ÎšÎ¬Ï„Î¿Ï‡Î¿Ï‚: FATHER</button>
  <button onclick="switchPortfolio('summary')" id="btn-summary">ğŸ“Š Î£ÏÎ½Î¿ÏˆÎ· ÎŒÎ»Ï‰Î½</button>
</div>

<div id="mitsos-portfolio" class="portfolio-content">
  <div class="section-title">Î Î¿ÏÏ„Î¿Ï†ÏŒÎ»Î¹Î¿ - <span class="owner-name">ÎšÎ¬Ï„Î¿Ï‡Î¿Ï‚: ÎœÎ—Î¤Î£ÎŸÎ£</span></div>
  
  <div class="controls">
    <button onclick="addPurchaseRow('mitsos')" class="add-purchase">â• Î ÏÎ¿ÏƒÎ¸Î®ÎºÎ· Î‘Î³Î¿ÏÎ¬Ï‚</button>
    <button onclick="addSaleRow('mitsos')" class="add-sale">â– Î ÏÎ¿ÏƒÎ¸Î®ÎºÎ· Î ÏÎ»Î·ÏƒÎ·Ï‚</button>
    <button onclick="savePortfolio('mitsos')" class="save">ğŸ’¾ Î‘Ï€Î¿Î¸Î®ÎºÎµÏ…ÏƒÎ·</button>
    <button onclick="saveAllData()" class="save-all">ğŸ’¾ Î‘Ï€Î¿Î¸Î®ÎºÎµÏ…ÏƒÎ· ÎŒÎ»Ï‰Î½</button>
  </div>

  <div class="sub-section-title">Î‘Î“ÎŸÎ¡Î•Î£</div>
  <table id="mitsos-purchases">
    <thead>
      <tr>
        <th>Î‘/Î‘</th>
        <th>Î—Î¼ÎµÏÎ¿Î¼Î·Î½Î¯Î± Î‘Î³Î¿ÏÎ¬Ï‚</th>
        <th>ÎŒÎ½Î¿Î¼Î± ÎœÎµÏ„Î¿Ï‡Î®Ï‚</th>
        <th>Î¤ÎµÎ¼Î¬Ï‡Î¹Î±</th>
        <th>Î¤Î¹Î¼Î® Î‘Î³Î¿ÏÎ¬Ï‚/Ï„ÎµÎ¼. (â‚¬)</th>
        <th>Î‘Î¾Î¯Î± Î‘Î³Î¿ÏÎ¬Ï‚ (â‚¬)</th>
        <th>Î ÏÎ¿Î¼Î®Î¸ÎµÎ¹ÎµÏ‚ Î‘Î³Î¿ÏÎ¬Ï‚ (â‚¬)</th>
        <th>Î£Ï…Î½Î¿Î»Î¹ÎºÏŒ ÎšÏŒÏƒÏ„Î¿Ï‚ (â‚¬)</th>
        <th>Î¤ÏÎ­Ï‡Î¿Ï…ÏƒÎ± Î¤Î¹Î¼Î® (â‚¬)</th>
        <th>Î¤ÏÎ­Ï‡Î¿Ï…ÏƒÎ± Î‘Î¾Î¯Î± (â‚¬)</th>
        <th>Î—Î¼ÎµÏÎ¿Î¼Î·Î½Î¯Î± Î‘Ï€Î¿ÎºÎ¿Ï€Î®Ï‚ ÎœÎµÏÎ¯ÏƒÎ¼Î±Ï„Î¿Ï‚</th>
        <th>ÎœÎ­ÏÎ¹ÏƒÎ¼Î± (â‚¬)</th>
        <th>Î”Î¹Î±Î³ÏÎ±Ï†Î®</th>
      </tr>
    </thead>
    <tbody></tbody>
    <tfoot>
      <tr class="totals-row">
        <td colspan="3"><strong>Î£Î¥ÎÎŸÎ›ÎŸ Î‘Î“ÎŸÎ¡Î©Î:</strong></td>
        <td id="mitsos-total-purchase-qty">0</td>
        <td id="mitsos-avg-purchase-price">0.00</td>
        <td id="mitsos-total-purchase-value">0.00</td>
        <td id="mitsos-total-purchase-commissions">0.00</td>
        <td id="mitsos-total-purchase-cost">0.00</td>
        <td>-</td>
        <td id="mitsos-total-current-value">0.00</td>
        <td>-</td>
        <td id="mitsos-total-dividends">0.00</td>
        <td></td>
      </tr>
    </tfoot>
  </table>

  <div class="sub-section-title">Î Î©Î›Î—Î£Î•Î™Î£</div>
  <table id="mitsos-sales">
    <thead>
      <tr>
        <th>Î‘/Î‘</th>
        <th>Î—Î¼ÎµÏÎ¿Î¼Î·Î½Î¯Î± Î ÏÎ»Î·ÏƒÎ·Ï‚</th>
        <th>ÎŒÎ½Î¿Î¼Î± ÎœÎµÏ„Î¿Ï‡Î®Ï‚</th>
        <th>Î¤ÎµÎ¼Î¬Ï‡Î¹Î±</th>
        <th>Î¤Î¹Î¼Î® Î ÏÎ»Î·ÏƒÎ·Ï‚/Ï„ÎµÎ¼. (â‚¬)</th>
        <th>Î‘Î¾Î¯Î± Î ÏÎ»Î·ÏƒÎ·Ï‚ (â‚¬)</th>
        <th>Î ÏÎ¿Î¼Î®Î¸ÎµÎ¹ÎµÏ‚ Î ÏÎ»Î·ÏƒÎ·Ï‚ (â‚¬)</th>
        <th>ÎšÎ±Î¸Î±ÏÎ­Ï‚ Î•Î¹ÏƒÏ€ÏÎ¬Î¾ÎµÎ¹Ï‚ (â‚¬)</th>
        <th>ÎšÎ­ÏÎ´Î¿Ï‚/Î–Î·Î¼Î¯Î± (â‚¬)</th>
        <th>Î”Î¹Î±Î³ÏÎ±Ï†Î®</th>
      </tr>
    </thead>
    <tbody></tbody>
    <tfoot>
      <tr class="totals-row">
        <td colspan="3"><strong>Î£Î¥ÎÎŸÎ›ÎŸ Î Î©Î›Î—Î£Î•Î©Î:</strong></td>
        <td id="mitsos-total-sale-qty">0</td>
        <td id="mitsos-avg-sale-price">0.00</td>
        <td id="mitsos-total-sale-value">0.00</td>
        <td id="mitsos-total-sale-commissions">0.00</td>
        <td id="mitsos-total-net-proceeds">0.00</td>
        <td id="mitsos-total-sale-pl">0.00</td>
        <td></td>
      </tr>
    </tfoot>
  </table>

  <div class="section-title">Î£ÏÎ½Î¿Î»Î± Î Î¿ÏÏ„Î¿Ï†Î¿Î»Î¯Î¿Ï…</div>
  <table id="mitsos-calculations">
    <thead>
      <tr>
        <th>Î¤ÎµÎ¼Î¬Ï‡Î¹Î± Ï€Î¿Ï… ÎšÏÎ±Ï„Î¿ÏÎ½Ï„Î±Î¹</th>
        <th>ÎœÎ­ÏƒÎ· Î¤Î¹Î¼Î® Î‘Î³Î¿ÏÎ¬Ï‚/Ï„ÎµÎ¼. (â‚¬)</th>
        <th>Î£Ï…Î½Î¿Î»Î¹ÎºÏŒ ÎšÏŒÏƒÏ„Î¿Ï‚ Î‘Î³Î¿ÏÎ¬Ï‚ (â‚¬)</th>
        <th>Î¤ÏÎ­Ï‡Î¿Ï…ÏƒÎ± Î‘Î¾Î¯Î± ÎœÎµÏ„Î¿Ï‡ÏÎ½ (â‚¬)</th>
        <th>Î£Ï…Î½Î¿Î»Î¹ÎºÏŒ ÎœÎ­ÏÎ¹ÏƒÎ¼Î± (â‚¬)</th>
        <th>Î£Ï…Î½Î¿Î»Î¹ÎºÏŒ ÎšÎ­ÏÎ´Î¿Ï‚/Î–Î·Î¼Î¯Î± (â‚¬)</th>
        <th>Î Î¿ÏƒÎ¿ÏƒÏ„ÏŒ ÎšÎ­ÏÎ´Î¿Ï…Ï‚/Î–Î·Î¼Î¯Î±Ï‚ (%)</th>
      </tr>
    </thead>
    <tbody>
      <tr class="calculations-row">
        <td id="mitsos-held-shares">0</td>
        <td id="mitsos-avg-cost-price">0.00</td>
        <td id="mitsos-total-cost">0.00</td>
        <td id="mitsos-current-value">0.00</td>
        <td id="mitsos-total-dividends-sum">0.00</td>
        <td id="mitsos-total-PL">0.00</td>
        <td id="mitsos-total-PLPercent">0.00%</td>
      </tr>
    </tbody>
  </table>
  
  <div class="section-title">Î Î»Î®ÏÎµÏ‚ Î™ÏƒÏ„Î¿ÏÎ¹ÎºÏŒ Î‘Î½Î¬ ÎœÎµÏ„Î¿Ï‡Î®</div>
  <table id="mitsos-stock-history" class="history-table">
    <thead>
      <tr>
        <th>ÎœÎµÏ„Î¿Ï‡Î®</th>
        <th>ÎšÎ±Ï„Î¬ÏƒÏ„Î±ÏƒÎ·</th>
        <th>Î£Ï…Î½Î¿Î»Î¹ÎºÎ¬ Î‘Î³Î¿ÏÎ±ÏƒÎ¼Î­Î½Î± Î¤ÎµÎ¼Î¬Ï‡Î¹Î±</th>
        <th>Î£Ï…Î½Î¿Î»Î¹ÎºÎ¬ Î Ï‰Î»Î·Î¼Î­Î½Î± Î¤ÎµÎ¼Î¬Ï‡Î¹Î±</th>
        <th>Î¤ÎµÎ¼Î¬Ï‡Î¹Î± Ï€Î¿Ï… ÎšÏÎ±Ï„Î¿ÏÎ½Ï„Î±Î¹</th>
        <th>Î£Ï…Î½Î¿Î»Î¹ÎºÏŒ ÎšÏŒÏƒÏ„Î¿Ï‚ Î‘Î³Î¿ÏÎ¬Ï‚ (â‚¬)</th>
        <th>Î£Ï…Î½Î¿Î»Î¹ÎºÏŒ ÎœÎ­ÏÎ¹ÏƒÎ¼Î± (â‚¬)</th>
        <th>Î£Ï…Î½Î¿Î»Î¹ÎºÎ­Ï‚ ÎšÎ±Î¸Î±ÏÎ­Ï‚ Î•Î¹ÏƒÏ€ÏÎ¬Î¾ÎµÎ¹Ï‚ Î Ï‰Î»Î®ÏƒÎµÏ‰Î½ (â‚¬)</th>
        <th>Î¤ÎµÎ»Î¹ÎºÏŒ ÎšÎ­ÏÎ´Î¿Ï‚/Î–Î·Î¼Î¯Î± (â‚¬)</th>
        <th>Î¤ÎµÎ»Î¹ÎºÏŒ Î Î¿ÏƒÎ¿ÏƒÏ„ÏŒ ÎšÎ­ÏÎ´Î¿Ï…Ï‚/Î–Î·Î¼Î¯Î±Ï‚ (%)</th>
      </tr>
    </thead>
    <tbody id="mitsos-stock-history-body">
    </tbody>
  </table>
</div>

<div id="aderfoula-portfolio" class="portfolio-content hidden">
  <div class="section-title">Î Î¿ÏÏ„Î¿Ï†ÏŒÎ»Î¹Î¿ - <span class="owner-name">ÎšÎ¬Ï„Î¿Ï‡Î¿Ï‚: Î‘Î”Î•Î¡Î¦ÎŸÎ¥Î›Î‘</span></div>
  
  <div class="controls">
    <button onclick="addPurchaseRow('aderfoula')" class="add-purchase">â• Î ÏÎ¿ÏƒÎ¸Î®ÎºÎ· Î‘Î³Î¿ÏÎ¬Ï‚</button>
    <button onclick="addSaleRow('aderfoula')" class="add-sale">â– Î ÏÎ¿ÏƒÎ¸Î®ÎºÎ· Î ÏÎ»Î·ÏƒÎ·Ï‚</button>
    <button onclick="savePortfolio('aderfoula')" class="save">ğŸ’¾ Î‘Ï€Î¿Î¸Î®ÎºÎµÏ…ÏƒÎ·</button>
    <button onclick="saveAllData()" class="save-all">ğŸ’¾ Î‘Ï€Î¿Î¸Î®ÎºÎµÏ…ÏƒÎ· ÎŒÎ»Ï‰Î½</button>
  </div>

  <div class="sub-section-title">Î‘Î“ÎŸÎ¡Î•Î£</div>
  <table id="aderfoula-purchases">
    <thead>
      <tr>
        <th>Î‘/Î‘</th>
        <th>Î—Î¼ÎµÏÎ¿Î¼Î·Î½Î¯Î± Î‘Î³Î¿ÏÎ¬Ï‚</th>
        <th>ÎŒÎ½Î¿Î¼Î± ÎœÎµÏ„Î¿Ï‡Î®Ï‚</th>
        <th>Î¤ÎµÎ¼Î¬Ï‡Î¹Î±</th>
        <th>Î¤Î¹Î¼Î® Î‘Î³Î¿ÏÎ¬Ï‚/Ï„ÎµÎ¼. (â‚¬)</th>
        <th>Î‘Î¾Î¯Î± Î‘Î³Î¿ÏÎ¬Ï‚ (â‚¬)</th>
        <th>Î ÏÎ¿Î¼Î®Î¸ÎµÎ¹ÎµÏ‚ Î‘Î³Î¿ÏÎ¬Ï‚ (â‚¬)</th>
        <th>Î£Ï…Î½Î¿Î»Î¹ÎºÏŒ ÎšÏŒÏƒÏ„Î¿Ï‚ (â‚¬)</th>
        <th>Î¤ÏÎ­Ï‡Î¿Ï…ÏƒÎ± Î¤Î¹Î¼Î® (â‚¬)</th>
        <th>Î¤ÏÎ­Ï‡Î¿Ï…ÏƒÎ± Î‘Î¾Î¯Î± (â‚¬)</th>
        <th>Î—Î¼ÎµÏÎ¿Î¼Î·Î½Î¯Î± Î‘Ï€Î¿ÎºÎ¿Ï€Î®Ï‚ ÎœÎµÏÎ¯ÏƒÎ¼Î±Ï„Î¿Ï‚</th>
        <th>ÎœÎ­ÏÎ¹ÏƒÎ¼Î± (â‚¬)</th>
        <th>Î”Î¹Î±Î³ÏÎ±Ï†Î®</th>
      </tr>
    </thead>
    <tbody></tbody>
    <tfoot>
      <tr class="totals-row">
        <td colspan="3"><strong>Î£Î¥ÎÎŸÎ›ÎŸ Î‘Î“ÎŸÎ¡Î©Î:</strong></td>
        <td id="aderfoula-total-purchase-qty">0</td>
        <td id="aderfoula-avg-purchase-price">0.00</td>
        <td id="aderfoula-total-purchase-value">0.00</td>
        <td id="aderfoula-total-purchase-commissions">0.00</td>
        <td id="aderfoula-total-purchase-cost">0.00</td>
        <td>-</td>
        <td id="aderfoula-total-current-value">0.00</td>
        <td>-</td>
        <td id="aderfoula-total-dividends">0.00</td>
        <td></td>
      </tr>
    </tfoot>
  </table>

  <div class="sub-section-title">Î Î©Î›Î—Î£Î•Î™Î£</div>
  <table id="aderfoula-sales">
    <thead>
      <tr>
        <th>Î‘/Î‘</th>
        <th>Î—Î¼ÎµÏÎ¿Î¼Î·Î½Î¯Î± Î ÏÎ»Î·ÏƒÎ·Ï‚</th>
        <th>ÎŒÎ½Î¿Î¼Î± ÎœÎµÏ„Î¿Ï‡Î®Ï‚</th>
        <th>Î¤ÎµÎ¼Î¬Ï‡Î¹Î±</th>
        <th>Î¤Î¹Î¼Î® Î ÏÎ»Î·ÏƒÎ·Ï‚/Ï„ÎµÎ¼. (â‚¬)</th>
        <th>Î‘Î¾Î¯Î± Î ÏÎ»Î·ÏƒÎ·Ï‚ (â‚¬)</th>
        <th>Î ÏÎ¿Î¼Î®Î¸ÎµÎ¹ÎµÏ‚ Î ÏÎ»Î·ÏƒÎ·Ï‚ (â‚¬)</th>
        <th>ÎšÎ±Î¸Î±ÏÎ­Ï‚ Î•Î¹ÏƒÏ€ÏÎ¬Î¾ÎµÎ¹Ï‚ (â‚¬)</th>
        <th>ÎšÎ­ÏÎ´Î¿Ï‚/Î–Î·Î¼Î¯Î± (â‚¬)</th>
        <th>Î”Î¹Î±Î³ÏÎ±Ï†Î®</th>
      </tr>
    </thead>
    <tbody></tbody>
    <tfoot>
      <tr class="totals-row">
        <td colspan="3"><strong>Î£Î¥ÎÎŸÎ›ÎŸ Î Î©Î›Î—Î£Î•Î©Î:</strong></td>
        <td id="aderfoula-total-sale-qty">0</td>
        <td id="aderfoula-avg-sale-price">0.00</td>
        <td id="aderfoula-total-sale-value">0.00</td>
        <td id="aderfoula-total-sale-commissions">0.00</td>
        <td id="aderfoula-total-net-proceeds">0.00</td>
        <td id="aderfoula-total-sale-pl">0.00</td>
        <td></td>
      </tr>
    </tfoot>
  </table>

  <div class="section-title">Î£ÏÎ½Î¿Î»Î± Î Î¿ÏÏ„Î¿Ï†Î¿Î»Î¯Î¿Ï…</div>
  <table id="aderfoula-calculations">
    <thead>
      <tr>
        <th>Î¤ÎµÎ¼Î¬Ï‡Î¹Î± Ï€Î¿Ï… ÎšÏÎ±Ï„Î¿ÏÎ½Ï„Î±Î¹</th>
        <th>ÎœÎ­ÏƒÎ· Î¤Î¹Î¼Î® Î‘Î³Î¿ÏÎ¬Ï‚/Ï„ÎµÎ¼. (â‚¬)</th>
        <th>Î£Ï…Î½Î¿Î»Î¹ÎºÏŒ ÎšÏŒÏƒÏ„Î¿Ï‚ Î‘Î³Î¿ÏÎ¬Ï‚ (â‚¬)</th>
        <th>Î¤ÏÎ­Ï‡Î¿Ï…ÏƒÎ± Î‘Î¾Î¯Î± ÎœÎµÏ„Î¿Ï‡ÏÎ½ (â‚¬)</th>
        <th>Î£Ï…Î½Î¿Î»Î¹ÎºÏŒ ÎœÎ­ÏÎ¹ÏƒÎ¼Î± (â‚¬)</th>
        <th>Î£Ï…Î½Î¿Î»Î¹ÎºÏŒ ÎšÎ­ÏÎ´Î¿Ï‚/Î–Î·Î¼Î¯Î± (â‚¬)</th>
        <th>Î Î¿ÏƒÎ¿ÏƒÏ„ÏŒ ÎšÎ­ÏÎ´Î¿Ï…Ï‚/Î–Î·Î¼Î¯Î±Ï‚ (%)</th>
      </tr>
    </thead>
    <tbody>
      <tr class="calculations-row">
        <td id="aderfoula-held-shares">0</td>
        <td id="aderfoula-avg-cost-price">0.00</td>
        <td id="aderfoula-total-cost">0.00</td>
        <td id="aderfoula-current-value">0.00</td>
        <td id="aderfoula-total-dividends-sum">0.00</td>
        <td id="aderfoula-total-PL">0.00</td>
        <td id="aderfoula-total-PLPercent">0.00%</td>
      </tr>
    </tbody>
  </table>
  
  <div class="section-title">Î Î»Î®ÏÎµÏ‚ Î™ÏƒÏ„Î¿ÏÎ¹ÎºÏŒ Î‘Î½Î¬ ÎœÎµÏ„Î¿Ï‡Î®</div>
  <table id="aderfoula-stock-history" class="history-table">
    <thead>
      <tr>
        <th>ÎœÎµÏ„Î¿Ï‡Î®</th>
        <th>ÎšÎ±Ï„Î¬ÏƒÏ„Î±ÏƒÎ·</th>
        <th>Î£Ï…Î½Î¿Î»Î¹ÎºÎ¬ Î‘Î³Î¿ÏÎ±ÏƒÎ¼Î­Î½Î± Î¤ÎµÎ¼Î¬Ï‡Î¹Î±</th>
        <th>Î£Ï…Î½Î¿Î»Î¹ÎºÎ¬ Î Ï‰Î»Î·Î¼Î­Î½Î± Î¤ÎµÎ¼Î¬Ï‡Î¹Î±</th>
        <th>Î¤ÎµÎ¼Î¬Ï‡Î¹Î± Ï€Î¿Ï… ÎšÏÎ±Ï„Î¿ÏÎ½Ï„Î±Î¹</th>
        <th>Î£Ï…Î½Î¿Î»Î¹ÎºÏŒ ÎšÏŒÏƒÏ„Î¿Ï‚ Î‘Î³Î¿ÏÎ¬Ï‚ (â‚¬)</th>
        <th>Î£Ï…Î½Î¿Î»Î¹ÎºÏŒ ÎœÎ­ÏÎ¹ÏƒÎ¼Î± (â‚¬)</th>
        <th>Î£Ï…Î½Î¿Î»Î¹ÎºÎ­Ï‚ ÎšÎ±Î¸Î±ÏÎ­Ï‚ Î•Î¹ÏƒÏ€ÏÎ¬Î¾ÎµÎ¹Ï‚ Î Ï‰Î»Î®ÏƒÎµÏ‰Î½ (â‚¬)</th>
        <th>Î¤ÎµÎ»Î¹ÎºÏŒ ÎšÎ­ÏÎ´Î¿Ï‚/Î–Î·Î¼Î¯Î± (â‚¬)</th>
        <th>Î¤ÎµÎ»Î¹ÎºÏŒ Î Î¿ÏƒÎ¿ÏƒÏ„ÏŒ ÎšÎ­ÏÎ´Î¿Ï…Ï‚/Î–Î·Î¼Î¯Î±Ï‚ (%)</th>
      </tr>
    </thead>
    <tbody id="aderfoula-stock-history-body">
    </tbody>
  </table>
</div>

<div id="father-portfolio" class="portfolio-content hidden">
  <div class="section-title">Î Î¿ÏÏ„Î¿Ï†ÏŒÎ»Î¹Î¿ - <span class="owner-name">ÎšÎ¬Ï„Î¿Ï‡Î¿Ï‚: FATHER</span></div>
  
  <div class="controls">
    <button onclick="addPurchaseRow('father')" class="add-purchase">â• Î ÏÎ¿ÏƒÎ¸Î®ÎºÎ· Î‘Î³Î¿ÏÎ¬Ï‚</button>
    <button onclick="addSaleRow('father')" class="add-sale">â– Î ÏÎ¿ÏƒÎ¸Î®ÎºÎ· Î ÏÎ»Î·ÏƒÎ·Ï‚</button>
    <button onclick="savePortfolio('father')" class="save">ğŸ’¾ Î‘Ï€Î¿Î¸Î®ÎºÎµÏ…ÏƒÎ·</button>
    <button onclick="saveAllData()" class="save-all">ğŸ’¾ Î‘Ï€Î¿Î¸Î®ÎºÎµÏ…ÏƒÎ· ÎŒÎ»Ï‰Î½</button>
  </div>

  <div class="sub-section-title">Î‘Î“ÎŸÎ¡Î•Î£</div>
  <table id="father-purchases">
    <thead>
      <tr>
        <th>Î‘/Î‘</th>
        <th>Î—Î¼ÎµÏÎ¿Î¼Î·Î½Î¯Î± Î‘Î³Î¿ÏÎ¬Ï‚</th>
        <th>ÎŒÎ½Î¿Î¼Î± ÎœÎµÏ„Î¿Ï‡Î®Ï‚</th>
        <th>Î¤ÎµÎ¼Î¬Ï‡Î¹Î±</th>
        <th>Î¤Î¹Î¼Î® Î‘Î³Î¿ÏÎ¬Ï‚/Ï„ÎµÎ¼. (â‚¬)</th>
        <th>Î‘Î¾Î¯Î± Î‘Î³Î¿ÏÎ¬Ï‚ (â‚¬)</th>
        <th>Î ÏÎ¿Î¼Î®Î¸ÎµÎ¹ÎµÏ‚ Î‘Î³Î¿ÏÎ¬Ï‚ (â‚¬)</th>
        <th>Î£Ï…Î½Î¿Î»Î¹ÎºÏŒ ÎšÏŒÏƒÏ„Î¿Ï‚ (â‚¬)</th>
        <th>Î¤ÏÎ­Ï‡Î¿Ï…ÏƒÎ± Î¤Î¹Î¼Î® (â‚¬)</th>
        <th>Î¤ÏÎ­Ï‡Î¿Ï…ÏƒÎ± Î‘Î¾Î¯Î± (â‚¬)</th>
        <th>Î—Î¼ÎµÏÎ¿Î¼Î·Î½Î¯Î± Î‘Ï€Î¿ÎºÎ¿Ï€Î®Ï‚ ÎœÎµÏÎ¯ÏƒÎ¼Î±Ï„Î¿Ï‚</th>
        <th>ÎœÎ­ÏÎ¹ÏƒÎ¼Î± (â‚¬)</th>
        <th>Î”Î¹Î±Î³ÏÎ±Ï†Î®</th>
      </tr>
    </thead>
    <tbody></tbody>
    <tfoot>
      <tr class="totals-row">
        <td colspan="3"><strong>Î£Î¥ÎÎŸÎ›ÎŸ Î‘Î“ÎŸÎ¡Î©Î:</strong></td>
        <td id="father-total-purchase-qty">0</td>
        <td id="father-avg-purchase-price">0.00</td>
        <td id="father-total-purchase-value">0.00</td>
        <td id="father-total-purchase-commissions">0.00</td>
        <td id="father-total-purchase-cost">0.00</td>
        <td>-</td>
        <td id="father-total-current-value">0.00</td>
        <td>-</td>
        <td id="father-total-dividends">0.00</td>
        <td></td>
      </tr>
    </tfoot>
  </table>

  <div class="sub-section-title">Î Î©Î›Î—Î£Î•Î™Î£</div>
  <table id="father-sales">
    <thead>
      <tr>
        <th>Î‘/Î‘</th>
        <th>Î—Î¼ÎµÏÎ¿Î¼Î·Î½Î¯Î± Î ÏÎ»Î·ÏƒÎ·Ï‚</th>
        <th>ÎŒÎ½Î¿Î¼Î± ÎœÎµÏ„Î¿Ï‡Î®Ï‚</th>
        <th>Î¤ÎµÎ¼Î¬Ï‡Î¹Î±</th>
        <th>Î¤Î¹Î¼Î® Î ÏÎ»Î·ÏƒÎ·Ï‚/Ï„ÎµÎ¼. (â‚¬)</th>
        <th>Î‘Î¾Î¯Î± Î ÏÎ»Î·ÏƒÎ·Ï‚ (â‚¬)</th>
        <th>Î ÏÎ¿Î¼Î®Î¸ÎµÎ¹ÎµÏ‚ Î ÏÎ»Î·ÏƒÎ·Ï‚ (â‚¬)</th>
        <th>ÎšÎ±Î¸Î±ÏÎ­Ï‚ Î•Î¹ÏƒÏ€ÏÎ¬Î¾ÎµÎ¹Ï‚ (â‚¬)</th>
        <th>ÎšÎ­ÏÎ´Î¿Ï‚/Î–Î·Î¼Î¯Î± (â‚¬)</th>
        <th>Î”Î¹Î±Î³ÏÎ±Ï†Î®</th>
      </tr>
    </thead>
    <tbody></tbody>
    <tfoot>
      <tr class="totals-row">
        <td colspan="3"><strong>Î£Î¥ÎÎŸÎ›ÎŸ Î Î©Î›Î—Î£Î•Î©Î:</strong></td>
        <td id="father-total-sale-qty">0</td>
        <td id="father-avg-sale-price">0.00</td>
        <td id="father-total-sale-value">0.00</td>
        <td id="father-total-sale-commissions">0.00</td>
        <td id="father-total-net-proceeds">0.00</td>
        <td id="father-total-sale-pl">0.00</td>
        <td></td>
      </tr>
    </tfoot>
  </table>

  <div class="section-title">Î£ÏÎ½Î¿Î»Î± Î Î¿ÏÏ„Î¿Ï†Î¿Î»Î¯Î¿Ï…</div>
  <table id="father-calculations">
    <thead>
      <tr>
        <th>Î¤ÎµÎ¼Î¬Ï‡Î¹Î± Ï€Î¿Ï… ÎšÏÎ±Ï„Î¿ÏÎ½Ï„Î±Î¹</th>
        <th>ÎœÎ­ÏƒÎ· Î¤Î¹Î¼Î® Î‘Î³Î¿ÏÎ¬Ï‚/Ï„ÎµÎ¼. (â‚¬)</th>
        <th>Î£Ï…Î½Î¿Î»Î¹ÎºÏŒ ÎšÏŒÏƒÏ„Î¿Ï‚ Î‘Î³Î¿ÏÎ¬Ï‚ (â‚¬)</th>
        <th>Î¤ÏÎ­Ï‡Î¿Ï…ÏƒÎ± Î‘Î¾Î¯Î± ÎœÎµÏ„Î¿Ï‡ÏÎ½ (â‚¬)</th>
        <th>Î£Ï…Î½Î¿Î»Î¹ÎºÏŒ ÎœÎ­ÏÎ¹ÏƒÎ¼Î± (â‚¬)</th>
        <th>Î£Ï…Î½Î¿Î»Î¹ÎºÏŒ ÎšÎ­ÏÎ´Î¿Ï‚/Î–Î·Î¼Î¯Î± (â‚¬)</th>
        <th>Î Î¿ÏƒÎ¿ÏƒÏ„ÏŒ ÎšÎ­ÏÎ´Î¿Ï…Ï‚/Î–Î·Î¼Î¯Î±Ï‚ (%)</th>
      </tr>
    </thead>
    <tbody>
      <tr class="calculations-row">
        <td id="father-held-shares">0</td>
        <td id="father-avg-cost-price">0.00</td>
        <td id="father-total-cost">0.00</td>
        <td id="father-current-value">0.00</td>
        <td id="father-total-dividends-sum">0.00</td>
        <td id="father-total-PL">0.00</td>
        <td id="father-total-PLPercent">0.00%</td>
      </tr>
    </tbody>
  </table>
  
  <div class="section-title">Î Î»Î®ÏÎµÏ‚ Î™ÏƒÏ„Î¿ÏÎ¹ÎºÏŒ Î‘Î½Î¬ ÎœÎµÏ„Î¿Ï‡Î®</div>
  <table id="father-stock-history" class="history-table">
    <thead>
      <tr>
        <th>ÎœÎµÏ„Î¿Ï‡Î®</th>
        <th>ÎšÎ±Ï„Î¬ÏƒÏ„Î±ÏƒÎ·</th>
        <th>Î£Ï…Î½Î¿Î»Î¹ÎºÎ¬ Î‘Î³Î¿ÏÎ±ÏƒÎ¼Î­Î½Î± Î¤ÎµÎ¼Î¬Ï‡Î¹Î±</th>
        <th>Î£Ï…Î½Î¿Î»Î¹ÎºÎ¬ Î Ï‰Î»Î·Î¼Î­Î½Î± Î¤ÎµÎ¼Î¬Ï‡Î¹Î±</th>
        <th>Î¤ÎµÎ¼Î¬Ï‡Î¹Î± Ï€Î¿Ï… ÎšÏÎ±Ï„Î¿ÏÎ½Ï„Î±Î¹</th>
        <th>Î£Ï…Î½Î¿Î»Î¹ÎºÏŒ ÎšÏŒÏƒÏ„Î¿Ï‚ Î‘Î³Î¿ÏÎ¬Ï‚ (â‚¬)</th>
        <th>Î£Ï…Î½Î¿Î»Î¹ÎºÏŒ ÎœÎ­ÏÎ¹ÏƒÎ¼Î± (â‚¬)</th>
        <th>Î£Ï…Î½Î¿Î»Î¹ÎºÎ­Ï‚ ÎšÎ±Î¸Î±ÏÎ­Ï‚ Î•Î¹ÏƒÏ€ÏÎ¬Î¾ÎµÎ¹Ï‚ Î Ï‰Î»Î®ÏƒÎµÏ‰Î½ (â‚¬)</th>
        <th>Î¤ÎµÎ»Î¹ÎºÏŒ ÎšÎ­ÏÎ´Î¿Ï‚/Î–Î·Î¼Î¯Î± (â‚¬)</th>
        <th>Î¤ÎµÎ»Î¹ÎºÏŒ Î Î¿ÏƒÎ¿ÏƒÏ„ÏŒ ÎšÎ­ÏÎ´Î¿Ï…Ï‚/Î–Î·Î¼Î¯Î±Ï‚ (%)</th>
      </tr>
    </thead>
    <tbody id="father-stock-history-body">
    </tbody>
  </table>
</div>

<div id="summary-portfolio" class="portfolio-content hidden">
  <div class="section-title">ğŸ“Š Î£Î¥ÎÎŸÎ¨Î— ÎŸÎ›Î©Î Î¤Î©Î Î ÎŸÎ¡Î¤ÎŸÎ¦ÎŸÎ›Î™Î©Î</div>
  
  <table id="summary-table">
    <thead>
      <tr>
        <th>ÎšÎ¬Ï„Î¿Ï‡Î¿Ï‚</th>
        <th>Î¤ÎµÎ¼Î¬Ï‡Î¹Î± Ï€Î¿Ï… ÎšÏÎ±Ï„Î¿ÏÎ½Ï„Î±Î¹</th>
        <th>Î£Ï…Î½Î¿Î»Î¹ÎºÏŒ ÎšÏŒÏƒÏ„Î¿Ï‚ Î‘Î³Î¿ÏÎ¬Ï‚ (â‚¬)</th>
        <th>Î£Ï…Î½Î¿Î»Î¹ÎºÎ­Ï‚ ÎšÎ±Î¸Î±ÏÎ­Ï‚ Î•Î¹ÏƒÏ€ÏÎ¬Î¾ÎµÎ¹Ï‚ (â‚¬)</th>
        <th>Î¤ÏÎ­Ï‡Î¿Ï…ÏƒÎ± Î‘Î¾Î¯Î± ÎœÎµÏ„Î¿Ï‡ÏÎ½ (â‚¬)</th>
        <th>Î£Ï…Î½Î¿Î»Î¹ÎºÏŒ ÎœÎ­ÏÎ¹ÏƒÎ¼Î± (â‚¬)</th>
        <th>Î£Ï…Î½Î¿Î»Î¹ÎºÏŒ ÎšÎ­ÏÎ´Î¿Ï‚/Î–Î·Î¼Î¯Î± (â‚¬)</th>
        <th>Î Î¿ÏƒÎ¿ÏƒÏ„ÏŒ ÎšÎ­ÏÎ´Î¿Ï…Ï‚/Î–Î·Î¼Î¯Î±Ï‚ (%)</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td><strong>ÎœÎ—Î¤Î£ÎŸÎ£</strong></td>
        <td id="summary-mitsos-held">0</td>
        <td id="summary-mitsos-cost">0.00</td>
        <td id="summary-mitsos-proceeds">0.00</td>
        <td id="summary-mitsos-current">0.00</td>
        <td id="summary-mitsos-dividends">0.00</td>
        <td id="summary-mitsos-pl">0.00</td>
        <td id="summary-mitsos-plpercent">0.00%</td>
      </tr>
      <tr>
        <td><strong>Î‘Î”Î•Î¡Î¦ÎŸÎ¥Î›Î‘</strong></td>
        <td id="summary-aderfoula-held">0</td>
        <td id="summary-aderfoula-cost">0.00</td>
        <td id="summary-aderfoula-proceeds">0.00</td>
        <td id="summary-aderfoula-current">0.00</td>
        <td id="summary-aderfoula-dividends">0.00</td>
        <td id="summary-aderfoula-pl">0.00</td>
        <td id="summary-aderfoula-plpercent">0.00%</td>
      </tr>
      <tr>
        <td><strong>FATHER</strong></td>
        <td id="summary-father-held">0</td>
        <td id="summary-father-cost">0.00</td>
        <td id="summary-father-proceeds">0.00</td>
        <td id="summary-father-current">0.00</td>
        <td id="summary-father-dividends">0.00</td>
        <td id="summary-father-pl">0.00</td>
        <td id="summary-father-plpercent">0.00%</td>
      </tr>
      <tr class="calculations-row">
        <td><strong>Î£Î¥ÎÎŸÎ›ÎŸ</strong></td>
        <td id="summary-total-held">0</td>
        <td id="summary-total-cost">0.00</td>
        <td id="summary-total-proceeds">0.00</td>
        <td id="summary-total-current">0.00</td>
        <td id="summary-total-dividends">0.00</td>
        <td id="summary-total-pl">0.00</td>
        <td id="summary-total-plpercent">0.00%</td>
      </tr>
    </tbody>
  </table>
</div>

<div id="chart-container">
  <canvas id="chart" height="100"></canvas>
</div>

<script>
let chart;
let currentPortfolio = 'mitsos';
const portfolios = ['mitsos', 'aderfoula', 'father'];

// Î£Ï…Î½Î¬ÏÏ„Î·ÏƒÎ· ÎµÎ¼Ï†Î¬Î½Î¹ÏƒÎ·Ï‚ Î¼Î·Î½ÏÎ¼Î±Ï„Î¿Ï‚
function showMessage(message, type = 'success') {
  const messageDiv = document.createElement('div');
  messageDiv.className = 'message';
  messageDiv.textContent = message;
  document.body.appendChild(messageDiv);
  
  setTimeout(() => {
    messageDiv.remove();
  }, 3000);
}

// Î ÏÎ¿ÏƒÎ¸Î®ÎºÎ· Î³ÏÎ±Î¼Î¼Î®Ï‚ Î±Î³Î¿ÏÎ¬Ï‚
function addPurchaseRow(portfolio, data = {}) {
  const tbody = document.querySelector(`#${portfolio}-purchases tbody`);
  const row = document.createElement('tr');
  const rowIndex = tbody.children.length + 1;
  const currentDate = new Date().toISOString().split('T')[0];

  row.innerHTML = `
    <td>${rowIndex}</td>
    <td><input type="date" value="${data.date || currentDate}" /></td>
    <td><input value="${data.name || ''}" placeholder="Ï€.Ï‡. Apple Inc." class="stock-name" /></td>
    <td><input type="number" min="0" step="1" value="${data.qty || 0}" class="purchase-qty" /></td>
    <td><input type="number" min="0" step="0.01" value="${data.buyPrice || 0.00}" class="purchase-price" /></td>
    <td class="purchaseValue">0.00</td>
    <td><input type="number" min="0" step="0.01" value="${data.commission || 0.00}" class="purchase-commission" placeholder="Î ÏÎ¿Î¼Î®Î¸ÎµÎ¹Î±" /></td>
    <td class="totalCost">0.00</td>
    <td><input type="number" min="0" step="0.01" value="${data.currentPrice || 0.00}" class="current-price current-price-input" placeholder="Î¤ÏÎ­Ï‡Î¿Ï…ÏƒÎ± Ï„Î¹Î¼Î®" /></td>
    <td class="currentValue">0.00</td>
    <td><input type="date" value="${data.dividendDate || ''}" class="dividend-date" /></td>
    <td><input type="number" min="0" step="0.01" value="${data.dividend || 0.00}" class="dividend dividend-input" placeholder="ÎœÎ­ÏÎ¹ÏƒÎ¼Î±" /></td>
    <td><button onclick="deleteRow(this, '${portfolio}', 'purchase')" class="delete" style="padding: 3px 8px; font-size:12px; background:#e74c3c; color:white; border:none; border-radius:4px; cursor:pointer;">âœ•</button></td>
  `;

  tbody.appendChild(row);
  
  // Î ÏÎ¿ÏƒÎ¸Î®ÎºÎ· event listeners
  row.querySelectorAll('input').forEach(input => {
    input.addEventListener('input', () => calculatePortfolio(portfolio));
  });
  
  calculatePortfolio(portfolio);
}

// Î ÏÎ¿ÏƒÎ¸Î®ÎºÎ· Î³ÏÎ±Î¼Î¼Î®Ï‚ Ï€ÏÎ»Î·ÏƒÎ·Ï‚
function addSaleRow(portfolio, data = {}) {
  const tbody = document.querySelector(`#${portfolio}-sales tbody`);
  const row = document.createElement('tr');
  const rowIndex = tbody.children.length + 1;
  const currentDate = new Date().toISOString().split('T')[0];

  row.innerHTML = `
    <td>${rowIndex}</td>
    <td><input type="date" value="${data.saleDate || currentDate}" /></td>
    <td><input value="${data.name || ''}" placeholder="Ï€.Ï‡. Apple Inc." class="sale-stock-name" /></td>
    <td><input type="number" min="0" step="1" value="${data.qty || 0}" class="sale-qty" /></td>
    <td><input type="number" min="0" step="0.01" value="${data.salePrice || 0.00}" class="sale-price" /></td>
    <td class="saleValue">0.00</td>
    <td><input type="number" min="0" step="0.01" value="${data.commission || 0.00}" class="sale-commission" placeholder="Î ÏÎ¿Î¼Î®Î¸ÎµÎ¹Î±" /></td>
    <td class="netProceeds">0.00</td>
    <td class="pl">0.00</td>
    <td><button onclick="deleteRow(this, '${portfolio}', 'sale')" class="delete" style="padding: 3px 8px; font-size:12px; background:#e74c3c; color:white; border:none; border-radius:4px; cursor:pointer;">âœ•</button></td>
  `;

  tbody.appendChild(row);
  
  // Î ÏÎ¿ÏƒÎ¸Î®ÎºÎ· event listeners
  row.querySelectorAll('input').forEach(input => {
    input.addEventListener('input', () => calculatePortfolio(portfolio));
  });
  
  calculatePortfolio(portfolio);
}

// Î”Î¹Î±Î³ÏÎ±Ï†Î® Î³ÏÎ±Î¼Î¼Î®Ï‚
function deleteRow(button, portfolio, type) {
  const row = button.closest('tr');
  row.remove();
  
  // Î•Ï€Î±Î½Î±ÏÎ¯Î¸Î¼Î·ÏƒÎ·
  const tbody = type === 'purchase' ? 
    document.querySelector(`#${portfolio}-purchases tbody`) : 
    document.querySelector(`#${portfolio}-sales tbody`);
  
  const rows = tbody.querySelectorAll('tr');
  rows.forEach((row, index) => {
    row.querySelector('td:first-child').textContent = index + 1;
  });
  
  calculatePortfolio(portfolio);
}

// Î¥Ï€Î¿Î»Î¿Î³Î¹ÏƒÎ¼ÏŒÏ‚ Ï€Î¿ÏÏ„Î¿Ï†Î¿Î»Î¯Î¿Ï… Î¼Îµ Ï€Î»Î®ÏÎµÏ‚ Î¹ÏƒÏ„Î¿ÏÎ¹ÎºÏŒ
function calculatePortfolio(portfolio) {
  let totalPurchaseQty = 0;
  let totalPurchaseValue = 0;
  let totalPurchaseCommissions = 0;
  let totalPurchaseCost = 0;
  let totalPurchasePriceSum = 0;
  let totalCurrentValue = 0;
  let totalDividends = 0;
  
  let totalSaleQty = 0;
  let totalSaleValue = 0;
  let totalSaleCommissions = 0;
  let totalNetProceeds = 0;
  let totalSalePriceSum = 0;
  let totalSalePL = 0;
  
  // Î‘Î½Ï„Î¹ÎºÎµÎ¯Î¼ÎµÎ½Î¿ Î³Î¹Î± Ï€Î±ÏÎ±ÎºÎ¿Î»Î¿ÏÎ¸Î·ÏƒÎ· Ï€Î»Î®ÏÎ¿Ï…Ï‚ Î¹ÏƒÏ„Î¿ÏÎ¹ÎºÎ¿Ï Î¼ÎµÏ„Î¿Ï‡ÏÎ½
  const stockHistory = {};
  
  // Î¥Ï€Î¿Î»Î¿Î³Î¹ÏƒÎ¼ÏŒÏ‚ Î±Î³Î¿ÏÏÎ½
  const purchaseRows = document.querySelectorAll(`#${portfolio}-purchases tbody tr`);
  purchaseRows.forEach(row => {
    const stockName = row.querySelector('.stock-name').value.trim();
    const qty = Number(row.querySelector('.purchase-qty').value) || 0;
    const price = Number(row.querySelector('.purchase-price').value) || 0;
    const commission = Number(row.querySelector('.purchase-commission').value) || 0;
    const currentPrice = Number(row.querySelector('.current-price').value) || 0;
    const dividend = Number(row.querySelector('.dividend').value) || 0;
    
    const purchaseValue = qty * price;
    const totalCost = purchaseValue + commission;
    const currentValue = qty * currentPrice;
    
    row.querySelector('.purchaseValue').innerText = purchaseValue.toFixed(2);
    row.querySelector('.totalCost').innerText = totalCost.toFixed(2);
    row.querySelector('.currentValue').innerText = currentValue.toFixed(2);
    
    totalPurchaseQty += qty;
    totalPurchaseValue += purchaseValue;
    totalPurchaseCommissions += commission;
    totalPurchaseCost += totalCost;
    totalPurchasePriceSum += price;
    totalCurrentValue += currentValue;
    totalDividends += dividend;
    
    // ÎšÎ±Ï„Î±Î³ÏÎ±Ï†Î® Î±Î³Î¿ÏÎ¬Ï‚ ÏƒÏ„Î¿ Î¹ÏƒÏ„Î¿ÏÎ¹ÎºÏŒ Î¼ÎµÏ„Î¿Ï‡Î®Ï‚
    if (stockName) {
      if (!stockHistory[stockName]) {
        stockHistory[stockName] = {
          totalPurchasedQty: 0,
          totalSoldQty: 0,
          totalPurchaseCost: 0,
          totalDividends: 0,
          totalSaleProceeds: 0,
          purchases: [],
          sales: []
        };
      }
      stockHistory[stockName].totalPurchasedQty += qty;
      stockHistory[stockName].totalPurchaseCost += totalCost;
      stockHistory[stockName].totalDividends += dividend;
      stockHistory[stockName].purchases.push({
        qty: qty,
        price: price,
        commission: commission,
        totalCost: totalCost,
        dividend: dividend
      });
    }
  });
  
  // Î¥Ï€Î¿Î»Î¿Î³Î¹ÏƒÎ¼ÏŒÏ‚ Ï€Ï‰Î»Î®ÏƒÎµÏ‰Î½
  const saleRows = document.querySelectorAll(`#${portfolio}-sales tbody tr`);
  saleRows.forEach(row => {
    const stockName = row.querySelector('.sale-stock-name').value.trim();
    const qty = Number(row.querySelector('.sale-qty').value) || 0;
    const price = Number(row.querySelector('.sale-price').value) || 0;
    const commission = Number(row.querySelector('.sale-commission').value) || 0;
    
    const saleValue = qty * price;
    const netProceeds = saleValue - commission;
    
    row.querySelector('.saleValue').innerText = saleValue.toFixed(2);
    row.querySelector('.netProceeds').innerText = netProceeds.toFixed(2);
    
    totalSaleQty += qty;
    totalSaleValue += saleValue;
    totalSaleCommissions += commission;
    totalNetProceeds += netProceeds;
    totalSalePriceSum += price;
    
    // ÎšÎ±Ï„Î±Î³ÏÎ±Ï†Î® Ï€ÏÎ»Î·ÏƒÎ·Ï‚ ÏƒÏ„Î¿ Î¹ÏƒÏ„Î¿ÏÎ¹ÎºÏŒ Î¼ÎµÏ„Î¿Ï‡Î®Ï‚
    if (stockName) {
      if (!stockHistory[stockName]) {
        stockHistory[stockName] = {
          totalPurchasedQty: 0,
          totalSoldQty: 0,
          totalPurchaseCost: 0,
          totalDividends: 0,
          totalSaleProceeds: 0,
          purchases: [],
          sales: []
        };
      }
      stockHistory[stockName].totalSoldQty += qty;
      stockHistory[stockName].totalSaleProceeds += netProceeds;
      stockHistory[stockName].sales.push({
        qty: qty,
        price: price,
        commission: commission,
        netProceeds: netProceeds
      });
    }
  });
  
  // Î¥Ï€Î¿Î»Î¿Î³Î¹ÏƒÎ¼ÏŒÏ‚ Ï„ÎµÎ¼Î±Ï‡Î¯Ï‰Î½ Ï€Î¿Ï… ÎºÏÎ±Ï„Î¿ÏÎ½Ï„Î±Î¹
  const heldShares = totalPurchaseQty - totalSaleQty;
  
  // Î¥Ï€Î¿Î»Î¿Î³Î¹ÏƒÎ¼ÏŒÏ‚ Î¼Î­ÏƒÎ·Ï‚ Ï„Î¹Î¼Î®Ï‚ Î±Î³Î¿ÏÎ¬Ï‚
  const avgPurchasePrice = totalPurchaseQty > 0 ? totalPurchaseValue / totalPurchaseQty : 0;
  const avgSalePrice = totalSaleQty > 0 ? totalSaleValue / totalSaleQty : 0;
  
  // Î¥Ï€Î¿Î»Î¿Î³Î¹ÏƒÎ¼ÏŒÏ‚ ÏƒÏ…Î½Î¿Î»Î¹ÎºÎ¿Ï ÎºÎ­ÏÎ´Î¿Ï…Ï‚/Î¶Î·Î¼Î¯Î±Ï‚ Î¼Îµ FIFO (First In First Out) Î¼Î­Î¸Î¿Î´Î¿
  Object.keys(stockHistory).forEach(stockName => {
    const stock = stockHistory[stockName];
    
    // Î¥Ï€Î¿Î»Î¿Î³Î¹ÏƒÎ¼ÏŒÏ‚ ÎºÎ­ÏÎ´Î¿Ï…Ï‚/Î¶Î·Î¼Î¯Î±Ï‚ Î¼Îµ FIFO
    let remainingShares = stock.totalPurchasedQty;
    let remainingCost = stock.totalPurchaseCost;
    let soldShares = 0;
    
    // Î¤Î±Î¾Î¹Î½ÏŒÎ¼Î·ÏƒÎ· Î±Î³Î¿ÏÏÎ½ ÎºÎ±Ï„Î¬ Î·Î¼ÎµÏÎ¿Î¼Î·Î½Î¯Î± (FIFO)
    stock.purchases.sort((a, b) => a.date - b.date);
    
    // Î“Î¹Î± ÎºÎ¬Î¸Îµ Ï€ÏÎ»Î·ÏƒÎ·
    stock.sales.forEach(sale => {
      let sharesToSell = sale.qty;
      let costOfSharesSold = 0;
      
      // Î‘Ï†Î±Î¯ÏÎµÏƒÎ· Î¼Îµ FIFO
      for (let i = 0; i < stock.purchases.length && sharesToSell > 0; i++) {
        const purchase = stock.purchases[i];
        if (purchase.qty > 0) {
          const sharesFromThisPurchase = Math.min(purchase.qty, sharesToSell);
          const costPerShare = purchase.totalCost / purchase.qty;
          costOfSharesSold += sharesFromThisPurchase * costPerShare;
          
          purchase.qty -= sharesFromThisPurchase;
          sharesToSell -= sharesFromThisPurchase;
          soldShares += sharesFromThisPurchase;
        }
      }
      
      // Î¥Ï€Î¿Î»Î¿Î³Î¹ÏƒÎ¼ÏŒÏ‚ ÎºÎ­ÏÎ´Î¿Ï…Ï‚/Î¶Î·Î¼Î¯Î±Ï‚ Î³Î¹Î± Î±Ï…Ï„Î® Ï„Î· Ï€ÏÎ»Î·ÏƒÎ·
      const plForSale = sale.netProceeds - costOfSharesSold;
      totalSalePL += plForSale;
    });
  });
  
  // Î£Ï…Î½Î¿Î»Î¹ÎºÏŒ ÎºÎ­ÏÎ´Î¿Ï‚/Î¶Î·Î¼Î¯Î± (ÏƒÏ…Î¼Ï€ÎµÏÎ¹Î»Î±Î¼Î²Î±Î½Î¿Î¼Î­Î½Ï‰Î½ Î¼ÎµÏÎ¹ÏƒÎ¼Î¬Ï„Ï‰Î½)
  const totalPL = totalCurrentValue + totalNetProceeds + totalDividends - totalPurchaseCost;
  const totalPLPercent = totalPurchaseCost > 0 ? (totalPL / totalPurchaseCost * 100) : 0;
  
  // ÎœÎ­ÏƒÎ· Ï„Î¹Î¼Î® ÎºÏŒÏƒÏ„Î¿Ï…Ï‚ Î±Î½Î¬ Ï„ÎµÎ¼Î¬Ï‡Î¹Î¿
  const avgCostPrice = totalPurchaseQty > 0 ? totalPurchaseCost / totalPurchaseQty : 0;
  
  // Î•Î½Î·Î¼Î­ÏÏ‰ÏƒÎ· ÏƒÏ…Î½Î¿Î»Î¹ÎºÏÎ½ Î±Î³Î¿ÏÏÎ½
  document.getElementById(`${portfolio}-total-purchase-qty`).innerText = totalPurchaseQty;
  document.getElementById(`${portfolio}-avg-purchase-price`).innerText = avgPurchasePrice.toFixed(2);
  document.getElementById(`${portfolio}-total-purchase-value`).innerText = totalPurchaseValue.toFixed(2);
  document.getElementById(`${portfolio}-total-purchase-commissions`).innerText = totalPurchaseCommissions.toFixed(2);
  document.getElementById(`${portfolio}-total-purchase-cost`).innerText = totalPurchaseCost.toFixed(2);
  document.getElementById(`${portfolio}-total-current-value`).innerText = totalCurrentValue.toFixed(2);
  document.getElementById(`${portfolio}-total-dividends`).innerText = totalDividends.toFixed(2);
  
  // Î•Î½Î·Î¼Î­ÏÏ‰ÏƒÎ· ÏƒÏ…Î½Î¿Î»Î¹ÎºÏÎ½ Ï€Ï‰Î»Î®ÏƒÎµÏ‰Î½
  document.getElementById(`${portfolio}-total-sale-qty`).innerText = totalSaleQty;
  document.getElementById(`${portfolio}-avg-sale-price`).innerText = avgSalePrice.toFixed(2);
  document.getElementById(`${portfolio}-total-sale-value`).innerText = totalSaleValue.toFixed(2);
  document.getElementById(`${portfolio}-total-sale-commissions`).innerText = totalSaleCommissions.toFixed(2);
  document.getElementById(`${portfolio}-total-net-proceeds`).innerText = totalNetProceeds.toFixed(2);
  document.getElementById(`${portfolio}-total-sale-pl`).innerHTML = `<span class="${totalSalePL >= 0 ? 'profit' : 'loss'}">${totalSalePL.toFixed(2)}</span>`;
  
  // Î•Î½Î·Î¼Î­ÏÏ‰ÏƒÎ· ÏƒÏ…Î½Î¿Î»Î¹ÎºÏÎ½ Ï…Ï€Î¿Î»Î¿Î³Î¹ÏƒÎ¼ÏÎ½ Ï€Î¿ÏÏ„Î¿Ï†Î¿Î»Î¯Î¿Ï…
  document.getElementById(`${portfolio}-held-shares`).innerText = heldShares;
  document.getElementById(`${portfolio}-avg-cost-price`).innerText = avgCostPrice.toFixed(2);
  document.getElementById(`${portfolio}-total-cost`).innerText = totalPurchaseCost.toFixed(2);
  document.getElementById(`${portfolio}-current-value`).innerText = totalCurrentValue.toFixed(2);
  document.getElementById(`${portfolio}-total-dividends-sum`).innerText = totalDividends.toFixed(2);
  document.getElementById(`${portfolio}-total-PL`).innerHTML = `<span class="${totalPL >= 0 ? 'profit' : 'loss'}">${totalPL.toFixed(2)}</span>`;
  document.getElementById(`${portfolio}-total-PLPercent`).innerHTML = `<span class="${totalPLPercent >= 0 ? 'profit' : 'loss'}">${totalPLPercent.toFixed(2)}%</span>`;
  
  // Î•Î½Î·Î¼Î­ÏÏ‰ÏƒÎ· Ï€Î»Î®ÏÎ¿Ï…Ï‚ Î¹ÏƒÏ„Î¿ÏÎ¹ÎºÎ¿Ï Î±Î½Î¬ Î¼ÎµÏ„Î¿Ï‡Î®
  updateStockHistory(portfolio, stockHistory);
  
  // Î‘Ï€Î¿Î¸Î®ÎºÎµÏ…ÏƒÎ·
  savePortfolioData(portfolio);
  
  // Î•Î½Î·Î¼Î­ÏÏ‰ÏƒÎ· ÏƒÏÎ½Î¿ÏˆÎ·Ï‚
  updateSummary();
}

// Î•Î½Î·Î¼Î­ÏÏ‰ÏƒÎ· Ï€Î»Î®ÏÎ¿Ï…Ï‚ Î¹ÏƒÏ„Î¿ÏÎ¹ÎºÎ¿Ï Î±Î½Î¬ Î¼ÎµÏ„Î¿Ï‡Î®
function updateStockHistory(portfolio, stockHistory) {
  const tbody = document.getElementById(`${portfolio}-stock-history-body`);
  tbody.innerHTML = '';
  
  Object.keys(stockHistory).forEach(stockName => {
    const stock = stockHistory[stockName];
    const heldShares = stock.totalPurchasedQty - stock.totalSoldQty;
    
    // Î ÏÎ¿ÏƒÎ´Î¹Î¿ÏÎ¹ÏƒÎ¼ÏŒÏ‚ ÎºÎ±Ï„Î¬ÏƒÏ„Î±ÏƒÎ·Ï‚
    let status = '';
    let statusClass = '';
    if (heldShares === 0 && stock.totalPurchasedQty > 0) {
      status = 'Î Î©Î›Î—Î˜Î—ÎšÎ• ÎŸÎ›ÎŸÎšÎ›Î—Î¡Î©Î¤Î™ÎšÎ‘';
      statusClass = 'status-sold';
    } else if (heldShares > 0 && stock.totalSoldQty > 0) {
      status = 'ÎœÎ•Î¡Î™ÎšÎ— Î Î©Î›Î—Î£Î—';
      statusClass = 'status-partial';
    } else if (heldShares > 0) {
      status = 'Î•ÎÎ•Î¡Î“Î—';
      statusClass = 'status-active';
    }
    
    // Î¥Ï€Î¿Î»Î¿Î³Î¹ÏƒÎ¼ÏŒÏ‚ Ï„ÎµÎ»Î¹ÎºÎ¿Ï ÎºÎ­ÏÎ´Î¿Ï…Ï‚/Î¶Î·Î¼Î¯Î±Ï‚
    const totalPL = stock.totalSaleProceeds + stock.totalDividends - stock.totalPurchaseCost;
    const totalPLPercent = stock.totalPurchaseCost > 0 ? (totalPL / stock.totalPurchaseCost * 100) : 0;
    
    const row = document.createElement('tr');
    if (heldShares === 0) {
      row.classList.add('sold-stock');
    }
    
    row.innerHTML = `
      <td><strong>${stockName}</strong></td>
      <td><span class="stock-status ${statusClass}">${status}</span></td>
      <td>${stock.totalPurchasedQty}</td>
      <td>${stock.totalSoldQty}</td>
      <td>${heldShares}</td>
      <td>${stock.totalPurchaseCost.toFixed(2)}</td>
      <td>${stock.totalDividends.toFixed(2)}</td>
      <td>${stock.totalSaleProceeds.toFixed(2)}</td>
      <td><span class="${totalPL >= 0 ? 'profit' : 'loss'}">${totalPL.toFixed(2)}</span></td>
      <td><span class="${totalPLPercent >= 0 ? 'profit' : 'loss'}">${totalPLPercent.toFixed(2)}%</span></td>
    `;
    
    tbody.appendChild(row);
  });
}

// Î•Î½Î·Î¼Î­ÏÏ‰ÏƒÎ· ÏƒÏÎ½Î¿ÏˆÎ·Ï‚ ÏŒÎ»Ï‰Î½ Ï„Ï‰Î½ Ï€Î¿ÏÏ„Î¿Ï†Î¿Î»Î¯Ï‰Î½
function updateSummary() {
  portfolios.forEach(portfolio => {
    const heldShares = parseInt(document.getElementById(`${portfolio}-held-shares`).innerText) || 0;
    const totalCost = parseFloat(document.getElementById(`${portfolio}-total-cost`).innerText) || 0;
    const totalNetProceeds = parseFloat(document.getElementById(`${portfolio}-total-net-proceeds`).innerText) || 0;
    const currentValue = parseFloat(document.getElementById(`${portfolio}-current-value`).innerText) || 0;
    const totalDividends = parseFloat(document.getElementById(`${portfolio}-total-dividends-sum`).innerText) || 0;
    const totalPL = parseFloat(document.getElementById(`${portfolio}-total-PL`).innerText) || 0;
    const totalPLPercent = parseFloat(document.getElementById(`${portfolio}-total-PLPercent`).innerText) || 0;
    
    document.getElementById(`summary-${portfolio}-held`).innerText = heldShares;
    document.getElementById(`summary-${portfolio}-cost`).innerText = totalCost.toFixed(2);
    document.getElementById(`summary-${portfolio}-proceeds`).innerText = totalNetProceeds.toFixed(2);
    document.getElementById(`summary-${portfolio}-current`).innerText = currentValue.toFixed(2);
    document.getElementById(`summary-${portfolio}-dividends`).innerText = totalDividends.toFixed(2);
    document.getElementById(`summary-${portfolio}-pl`).innerText = totalPL.toFixed(2);
    document.getElementById(`summary-${portfolio}-plpercent`).innerText = totalPLPercent.toFixed(2) + '%';
  });
  
  // Î¥Ï€Î¿Î»Î¿Î³Î¹ÏƒÎ¼ÏŒÏ‚ ÏƒÏ…Î½Î¿Î»Î¹ÎºÏÎ½
  let totalHeldAll = 0;
  let totalCostAll = 0;
  let totalProceedsAll = 0;
  let currentValueAll = 0;
  let totalDividendsAll = 0;
  let totalPLAll = 0;
  
  portfolios.forEach(portfolio => {
    totalHeldAll += parseInt(document.getElementById(`summary-${portfolio}-held`).innerText) || 0;
    totalCostAll += parseFloat(document.getElementById(`summary-${portfolio}-cost`).innerText) || 0;
    totalProceedsAll += parseFloat(document.getElementById(`summary-${portfolio}-proceeds`).innerText) || 0;
    currentValueAll += parseFloat(document.getElementById(`summary-${portfolio}-current`).innerText) || 0;
    totalDividendsAll += parseFloat(document.getElementById(`summary-${portfolio}-dividends`).innerText) || 0;
    totalPLAll += parseFloat(document.getElementById(`summary-${portfolio}-pl`).innerText) || 0;
  });
  
  const totalPLPercentAll = totalCostAll > 0 ? (totalPLAll / totalCostAll * 100) : 0;
  
  document.getElementById('summary-total-held').innerText = totalHeldAll;
  document.getElementById('summary-total-cost').innerText = totalCostAll.toFixed(2);
  document.getElementById('summary-total-proceeds').innerText = totalProceedsAll.toFixed(2);
  document.getElementById('summary-total-current').innerText = currentValueAll.toFixed(2);
  document.getElementById('summary-total-dividends').innerText = totalDividendsAll.toFixed(2);
  document.getElementById('summary-total-pl').innerHTML = `<span class="${totalPLAll >= 0 ? 'profit' : 'loss'}">${totalPLAll.toFixed(2)}</span>`;
  document.getElementById('summary-total-plpercent').innerHTML = `<span class="${totalPLPercentAll >= 0 ? 'profit' : 'loss'}">${totalPLPercentAll.toFixed(2)}%</span>`;
}

// Î‘Ï€Î¿Î¸Î®ÎºÎµÏ…ÏƒÎ· Î´ÎµÎ´Î¿Î¼Î­Î½Ï‰Î½ Ï€Î¿ÏÏ„Î¿Ï†Î¿Î»Î¯Î¿Ï…
function savePortfolioData(portfolio) {
  const data = {
    purchases: [],
    sales: []
  };
  
  // Î‘Ï€Î¿Î¸Î®ÎºÎµÏ…ÏƒÎ· Î±Î³Î¿ÏÏÎ½
  document.querySelectorAll(`#${portfolio}-purchases tbody tr`).forEach(row => {
    const inputs = row.querySelectorAll('input');
    data.purchases.push({
      date: inputs[0].value,
      name: inputs[1].value,
      qty: inputs[2].value,
      buyPrice: inputs[3].value,
      commission: inputs[5].value,
      currentPrice: inputs[7].value,
      dividendDate: inputs[9].value,
      dividend: inputs[10].value
    });
  });
  
  // Î‘Ï€Î¿Î¸Î®ÎºÎµÏ…ÏƒÎ· Ï€Ï‰Î»Î®ÏƒÎµÏ‰Î½
  document.querySelectorAll(`#${portfolio}-sales tbody tr`).forEach(row => {
    const inputs = row.querySelectorAll('input');
    data.sales.push({
      date: inputs[0].value,
      name: inputs[1].value,
      qty: inputs[2].value,
      salePrice: inputs[3].value,
      commission: inputs[5].value
    });
  });
  
  localStorage.setItem(`portfolio_${portfolio}`, JSON.stringify(data));
}

// Î‘Ï€Î¿Î¸Î®ÎºÎµÏ…ÏƒÎ· ÎµÎ½ÏŒÏ‚ ÏƒÏ…Î³ÎºÎµÎºÏÎ¹Î¼Î­Î½Î¿Ï… Ï€Î¿ÏÏ„Î¿Ï†Î¿Î»Î¯Î¿Ï…
function savePortfolio(portfolio) {
  savePortfolioData(portfolio);
  showMessage(`âœ… Î¤Î¿ Ï€Î¿ÏÏ„Î¿Ï†ÏŒÎ»Î¹Î¿ ${portfolio.toUpperCase()} Î±Ï€Î¿Î¸Î·ÎºÎµÏÏ„Î·ÎºÎµ ÎµÏ€Î¹Ï„Ï…Ï‡ÏÏ‚!`);
}

// Î‘Ï€Î¿Î¸Î®ÎºÎµÏ…ÏƒÎ· ÏŒÎ»Ï‰Î½ Ï„Ï‰Î½ Î´ÎµÎ´Î¿Î¼Î­Î½Ï‰Î½
function saveAllData() {
  portfolios.forEach(portfolio => {
    savePortfolioData(portfolio);
  });
  showMessage('âœ… ÎŒÎ»Î± Ï„Î± Ï€Î¿ÏÏ„Î¿Ï†ÏŒÎ»Î¹Î± Î±Ï€Î¿Î¸Î·ÎºÎµÏÏ„Î·ÎºÎ±Î½ ÎµÏ€Î¹Ï„Ï…Ï‡ÏÏ‚!');
}

// Î¦ÏŒÏÏ„Ï‰ÏƒÎ· Î´ÎµÎ´Î¿Î¼Î­Î½Ï‰Î½ Ï€Î¿ÏÏ„Î¿Ï†Î¿Î»Î¯Î¿Ï…
function loadPortfolioData(portfolio) {
  const data = JSON.parse(localStorage.getItem(`portfolio_${portfolio}`) || '{"purchases":[],"sales":[]}');
  
  // Î¦ÏŒÏÏ„Ï‰ÏƒÎ· Î±Î³Î¿ÏÏÎ½
  data.purchases.forEach(purchase => {
    addPurchaseRow(portfolio, purchase);
  });
  
  // Î¦ÏŒÏÏ„Ï‰ÏƒÎ· Ï€Ï‰Î»Î®ÏƒÎµÏ‰Î½
  data.sales.forEach(sale => {
    addSaleRow(portfolio, sale);
  });
}

// Î•Î½Î±Î»Î»Î±Î³Î® Ï€Î¿ÏÏ„Î¿Ï†Î¿Î»Î¯Î¿Ï…
function switchPortfolio(portfolio) {
  // Î‘Ï€ÏŒÎºÏÏ…ÏˆÎ· ÏŒÎ»Ï‰Î½
  document.querySelectorAll('.portfolio-content').forEach(el => {
    el.classList.add('hidden');
  });
  
  // Î‘Ï€ÎµÎ½ÎµÏÎ³Î¿Ï€Î¿Î¯Î·ÏƒÎ· ÏŒÎ»Ï‰Î½ Ï„Ï‰Î½ ÎºÎ¿Ï…Î¼Ï€Î¹ÏÎ½
  document.querySelectorAll('.portfolio-selector button').forEach(btn => {
    btn.classList.remove('active');
  });
  
  // Î•Î¼Ï†Î¬Î½Î¹ÏƒÎ· ÎµÏ€Î¹Î»ÎµÎ³Î¼Î­Î½Î¿Ï…
  document.getElementById(`${portfolio}-portfolio`).classList.remove('hidden');
  document.getElementById(`btn-${portfolio}`).classList.add('active');
  
  currentPortfolio = portfolio;
  
  // Î•Î¬Î½ ÎµÎ¯Î½Î±Î¹ Î· ÏƒÏÎ½Î¿ÏˆÎ·, ÎµÎ½Î·Î¼Î­ÏÏ‰ÏƒÎ·
  if (portfolio === 'summary') {
    updateSummary();
  }
}

// Î‘ÏÏ‡Î¹ÎºÎ¿Ï€Î¿Î¯Î·ÏƒÎ·
document.addEventListener('DOMContentLoaded', function() {
  // Î¦ÏŒÏÏ„Ï‰ÏƒÎ· Î´ÎµÎ´Î¿Î¼Î­Î½Ï‰Î½ Î³Î¹Î± ÎºÎ¬Î¸Îµ Ï€Î¿ÏÏ„Î¿Ï†ÏŒÎ»Î¹Î¿
  portfolios.forEach(portfolio => {
    loadPortfolioData(portfolio);
  });
  
  // Î ÏÎ¿ÏƒÎ¸Î®ÎºÎ· Î±ÏÏ‡Î¹ÎºÏÎ½ Î³ÏÎ±Î¼Î¼ÏÎ½ Î±Î½ ÎµÎ¯Î½Î±Î¹ Î¬Î´ÎµÎ¹Î±
  portfolios.forEach(portfolio => {
    const purchaseRows = document.querySelectorAll(`#${portfolio}-purchases tbody tr`);
    const saleRows = document.querySelectorAll(`#${portfolio}-sales tbody tr`);
    
    if (purchaseRows.length === 0) {
      addPurchaseRow(portfolio);
    }
    if (saleRows.length === 0) {
      addSaleRow(portfolio);
    }
  });
  
  // Î‘ÏÏ‡Î¹ÎºÏŒÏ‚ Ï…Ï€Î¿Î»Î¿Î³Î¹ÏƒÎ¼ÏŒÏ‚
  portfolios.forEach(portfolio => {
    calculatePortfolio(portfolio);
  });
});
</script>

</body>
</html>
